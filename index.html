<!DOCTYPE html>
<html lang="en" data-bs-theme="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NWA Grid Dashboard</title>
    
    <!-- Bootstrap 5 CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Bootstrap Icons -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css" rel="stylesheet">
    <!-- OpenLayers CSS -->
    <link href="https://cdn.jsdelivr.net/npm/ol@7.5.2/ol.css" rel="stylesheet">
    <!-- Custom Vaporwave Styles -->
    <link href="style.css" rel="stylesheet">
</head>
<body>
    <!-- Audio Player (hidden) -->
    <audio id="musicplayer" src="quack.mp3" preload="auto"></audio>
    
    <!-- Header -->
    <header class="dashboard-header">
        <div class="container-fluid">
            <div class="row align-items-center">
                <div class="col-auto">
                    <div class="logo-section">
                        <h1 class="logo-text">
                            <i class="bi bi-cloud-sun-fill"></i>
                            NWA GRID
                        </h1>
                        <span class="logo-credits">by Cameron Wilson & Maximiliano Garcia</span>
                    </div>
                </div>
                <div class="col">
                    <div class="header-info">
                        <span class="badge status-badge" id="statusBadge">
                            <i class="bi bi-circle-fill pulse"></i> LIVE
                        </span>
                        <span class="utc-clock" id="utcClock">00:00:00 UTC</span>
                    </div>
                </div>
                <div class="col-auto">
                    <div class="header-controls">
                        <button class="btn btn-outline-neon btn-sm" id="refreshAllBtn" title="Refresh All">
                            <i class="bi bi-arrow-clockwise"></i>
                        </button>
                        <button class="btn btn-outline-neon btn-sm" id="soundToggle" title="Toggle Sound">
                            <i class="bi bi-volume-mute-fill"></i>
                        </button>
                        <span class="last-update" id="lastUpdate">Last update: --:--</span>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Main Dashboard Grid -->
    <main class="dashboard-grid">
        <!-- Row 1: Weather + Incidents -->
        <section class="grid-panel weather-panel" id="weatherPanel">
            <div class="panel-header">
                <h3><i class="bi bi-thermometer-half"></i> Local Weather</h3>
                <span class="panel-location">Springdale, AR (KASG)</span>
            </div>
            <div class="panel-content">
                <div class="weather-display">
                    <div class="weather-main">
                        <div class="temp-display">
                            <span class="temp-value" id="wxTemp">--</span>
                            <span class="temp-unit">°F</span>
                        </div>
                        <div class="conditions" id="wxConditions">Loading...</div>
                        <div class="feels-like" id="wxFeelsLike"></div>
                    </div>
                    <div class="weather-details">
                        <div class="wx-detail">
                            <i class="bi bi-droplet-fill"></i>
                            <span class="detail-label">Dewpoint</span>
                            <span class="detail-value" id="wxDewpoint">--°F</span>
                        </div>
                        <div class="wx-detail">
                            <i class="bi bi-wind"></i>
                            <span class="detail-label">Wind</span>
                            <span class="detail-value" id="wxWind">-- mph</span>
                        </div>
                        <div class="wx-detail">
                            <i class="bi bi-speedometer2"></i>
                            <span class="detail-label">Gusts</span>
                            <span class="detail-value" id="wxGusts">-- mph</span>
                        </div>
                        <div class="wx-detail">
                            <i class="bi bi-moisture"></i>
                            <span class="detail-label">Humidity</span>
                            <span class="detail-value" id="wxHumidity">--%</span>
                        </div>
                        <div class="wx-detail">
                            <i class="bi bi-eye-fill"></i>
                            <span class="detail-label">Visibility</span>
                            <span class="detail-value" id="wxVisibility">-- mi</span>
                        </div>
                        <div class="wx-detail">
                            <i class="bi bi-speedometer"></i>
                            <span class="detail-label">Pressure</span>
                            <span class="detail-value" id="wxPressure">-- inHg</span>
                        </div>
                        <div class="wx-detail">
                            <i class="bi bi-compass"></i>
                            <span class="detail-label">Wind Dir</span>
                            <span class="detail-value" id="wxWindDir">--</span>
                        </div>
                        <div class="wx-detail">
                            <i class="bi bi-cloud-fill"></i>
                            <span class="detail-label">Ceiling</span>
                            <span class="detail-value" id="wxCeiling">-- ft</span>
                        </div>
                    </div>
                </div>
                <div class="outlook-images">
                    <div class="outlook-img">
                        <img src="https://www.spc.noaa.gov/products/outlook/day1otlk.gif" alt="SPC Day 1 Outlook" id="spcOutlook">
                        <span class="img-label">SPC Day 1</span>
                    </div>
                </div>
            </div>
        </section>

        <section class="grid-panel incidents-panel" id="incidentsPanel">
            <div class="panel-header">
                <h3><i class="bi bi-exclamation-triangle-fill"></i> iDriveArkansas Incidents</h3>
                <div class="panel-controls">
                    <label class="form-check form-check-inline">
                        <input class="form-check-input" type="checkbox" id="bridgeCheck">
                        <span class="form-check-label">Hide Bridges</span>
                    </label>
                    <button class="btn btn-sm btn-outline-neon" id="refreshIncidents">
                        <i class="bi bi-arrow-clockwise"></i>
                    </button>
                    <button class="btn btn-sm btn-outline-warning" id="clearIgnored">
                        Clear Ignored
                    </button>
                </div>
            </div>
            <div class="panel-content">
                <div class="incidents-count">
                    <span class="count-badge" id="incidentCount">0</span>
                    <span>Active Incidents</span>
                </div>
                <div class="table-responsive">
                    <table class="table table-dark table-striped table-hover" id="eventTable">
                        <thead>
                            <tr>
                                <th>Type</th>
                                <th>Description</th>
                                <th>Location</th>
                                <th>Distance</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="incidentTableBody">
                            <tr>
                                <td colspan="5" class="text-center">Loading incidents...</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </section>

        <!-- Row 2: Map + Plane Tracker -->
        <section class="grid-panel map-panel" id="mapPanel">
            <div class="panel-header">
                <h3><i class="bi bi-map-fill"></i> Incidents Map</h3>
            </div>
            <div class="panel-content">
                <div id="incidentMap" class="map-container"></div>
            </div>
        </section>

        <section class="grid-panel adsb-panel" id="adsbPanel">
            <div class="panel-header">
                <h3><i class="bi bi-airplane-fill"></i> ADS-B Plane Tracker</h3>
                <a href="https://globe.adsbexchange.com/?lat=36.1&lon=-94.1&zoom=9" target="_blank" class="external-link">
                    <i class="bi bi-box-arrow-up-right"></i>
                </a>
            </div>
            <div class="panel-content iframe-container">
                <iframe 
                    src="https://globe.adsbexchange.com/?lat=36.1&lon=-94.1&zoom=9&hideSideBar&hideButtons" 
                    title="ADS-B Exchange"
                    loading="lazy"
                    allowfullscreen>
                </iframe>
            </div>
        </section>

        <!-- Row 3: Radar -->
        <section class="grid-panel radar-panel" id="radarPanel">
            <div class="panel-header">
                <h3><i class="bi bi-radar"></i> Radar</h3>
                <div class="panel-tabs">
                    <button class="tab-btn active" data-tab="nws">NWS</button>
                    <button class="tab-btn" data-tab="cod">COD</button>
                </div>
            </div>
            <div class="panel-content">
                <div class="tab-content active" id="nws-tab">
                    <img src="https://radar.weather.gov/ridge/standard/KSRX_0.gif" alt="NWS Radar" id="nwsRadar" class="radar-img">
                </div>
                <div class="tab-content" id="cod-tab">
                    <iframe 
                        src="https://weather.cod.edu/satrad/nexrad/?parms=SRX-N0B-0-48-100-usa-rad"
                        title="COD Radar"
                        loading="lazy">
                    </iframe>
                </div>
            </div>
        </section>

        <!-- Row 4: Soundings/Models + Tools -->
        <section class="grid-panel models-panel" id="modelsPanel">
            <div class="panel-header">
                <h3><i class="bi bi-graph-up"></i> Soundings & Models</h3>
                <div class="panel-tabs">
                    <button class="tab-btn active" data-tab="soundings">Soundings</button>
                    <button class="tab-btn" data-tab="models">Models</button>
                    <button class="tab-btn" data-tab="spc">SPC</button>
                </div>
            </div>
            <div class="panel-content">
                <div class="tab-content active" id="soundings-tab">
                    <iframe 
                        src="https://www.spc.noaa.gov/exper/soundings/"
                        title="NWS Soundings"
                        loading="lazy">
                    </iframe>
                </div>
                <div class="tab-content" id="models-tab">
                    <iframe 
                        src="https://weather.cod.edu/forecast/"
                        title="COD Models"
                        loading="lazy">
                    </iframe>
                </div>
                <div class="tab-content" id="spc-tab">
                    <iframe 
                        src="https://www.spc.noaa.gov/classic.html"
                        title="SPC Products"
                        loading="lazy">
                    </iframe>
                </div>
            </div>
        </section>

        <section class="grid-panel tools-panel" id="toolsPanel">
            <div class="panel-header">
                <h3><i class="bi bi-tools"></i> Quick Links</h3>
            </div>
            <div class="panel-content">
                <div class="quick-links">
                    <a href="https://www.idrivearkansas.com/" target="_blank" class="quick-link">
                        <i class="bi bi-car-front-fill"></i>
                        <span>iDrive Arkansas</span>
                    </a>
                    <a href="https://globe.adsbexchange.com/" target="_blank" class="quick-link">
                        <i class="bi bi-airplane"></i>
                        <span>ADS-B Exchange</span>
                    </a>
                    <a href="https://www.weather.gov/tsa/" target="_blank" class="quick-link">
                        <i class="bi bi-cloud-sun"></i>
                        <span>NWS Tulsa</span>
                    </a>
                    <a href="https://www.nadocast.com/" target="_blank" class="quick-link">
                        <i class="bi bi-tornado"></i>
                        <span>Nadocast</span>
                    </a>
                    <a href="https://www.spc.noaa.gov/" target="_blank" class="quick-link">
                        <i class="bi bi-lightning-fill"></i>
                        <span>SPC</span>
                    </a>
                    <a href="https://www.nhc.noaa.gov/" target="_blank" class="quick-link">
                        <i class="bi bi-hurricane"></i>
                        <span>NHC</span>
                    </a>
                    <a href="https://www.pivotalweather.com/" target="_blank" class="quick-link">
                        <i class="bi bi-bar-chart-fill"></i>
                        <span>Pivotal Weather</span>
                    </a>
                    <a href="https://weather.cod.edu/" target="_blank" class="quick-link">
                        <i class="bi bi-mortarboard-fill"></i>
                        <span>COD Weather</span>
                    </a>
                    <a href="https://livestormchasing.com/" target="_blank" class="quick-link">
                        <i class="bi bi-broadcast"></i>
                        <span>Storm Streams</span>
                    </a>
                    <a href="https://forecast.weather.gov/MapClick.php?lat=36.06487500000003&lon=-94.16178999999994" target="_blank" class="quick-link">
                        <i class="bi bi-geo-alt-fill"></i>
                        <span>NWS Forecast</span>
                    </a>
                </div>
                <div class="camera-count mt-3">
                    <i class="bi bi-camera-video-fill"></i>
                    <span id="cameraCount">0</span> Traffic Cameras Online
                </div>
            </div>
        </section>
    </main>

    <!-- Footer -->
    <footer class="dashboard-footer">
        <div class="container-fluid">
            <div class="row">
                <div class="col text-center">
                    <div class="footer-content">
                        <span class="footer-text">
                            Auto-refresh: <span id="refreshTimer">5:00</span> | Data: NWS API, iDriveArkansas
                        </span>
                        <span class="footer-credits">
                            Rework of <a href="https://www.linkedin.com/in/ckwark/" target="_blank" class="credit-link">Cameron Wilson's</a> airtrak.me Site 
                            by <a href="https://www.linkedin.com/in/maximiliano-garcia642/" target="_blank" class="credit-link">Maximiliano Garcia</a>
                        </span>
                    </div>
                </div>
            </div>
        </div>
    </footer>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <!-- OpenLayers JS -->
    <script src="https://cdn.jsdelivr.net/npm/ol@7.5.2/dist/ol.js"></script>
    <!-- Custom Dashboard JS -->
    <script src="weather.js"></script>
</body>
</html>
