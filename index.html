<!DOCTYPE html>
<html lang="en" data-bs-theme="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NWA Grid Dashboard</title>
    
    <!-- Bootstrap 5 CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Bootstrap Icons -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css" rel="stylesheet">
    <!-- Custom Vaporwave Styles -->
    <link href="style.css" rel="stylesheet">
</head>
<body>
    <!-- Audio Player (hidden) -->
    <audio id="musicplayer">
        <source src="quack.mp3" type="audio/mpeg">
    </audio>
    
    <!-- Header -->
    <header class="dashboard-header">
        <div class="container-fluid">
            <div class="row align-items-center">
                <div class="col-auto">
                    <div class="logo-section">
                        <h1 class="logo-text">
                            <i class="bi bi-cloud-sun-fill"></i>
                            NWA GRID
                        </h1>
                        <span class="logo-credits">by Cameron Wilson & Maximiliano Garcia</span>
                    </div>
                </div>
                <div class="col">
                    <div class="header-info">
                        <span class="badge status-badge" id="statusBadge">
                            <i class="bi bi-circle-fill pulse"></i> LIVE
                        </span>
                        <span class="central-clock" id="centralClock">12:00:00 AM CT</span>
                    </div>
                </div>
                <div class="col-auto">
                    <div class="header-controls">
                        <button class="btn btn-outline-neon btn-sm" id="refreshAllBtn" title="Refresh All">
                            <i class="bi bi-arrow-clockwise"></i>
                        </button>
                        <button class="btn btn-outline-neon btn-sm" id="soundToggle" title="Toggle Sound">
                            <i class="bi bi-volume-mute-fill"></i>
                        </button>
                        <span class="last-update" id="lastUpdate">Last update: --:--</span>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Main Dashboard Grid -->
    <main class="dashboard-grid">
        <!-- Row 1: Weather + Incidents -->
        <section class="grid-panel weather-panel" id="weatherPanel">
            <div class="panel-header">
                <h3><i class="bi bi-thermometer-half"></i> Local Weather</h3>
                <div class="panel-header-right">
                    <span class="panel-location">Springdale, AR (KASG)</span>
                    <button class="btn-panel-refresh" onclick="getWeather()" title="Refresh Weather">
                        <i class="bi bi-arrow-clockwise"></i>
                    </button>
                    <a href="https://forecast.weather.gov/MapClick.php?lat=36.06487500000003&lon=-94.16178999999994" target="_blank" class="external-link" title="Open NWS Forecast">
                        <i class="bi bi-box-arrow-up-right"></i>
                    </a>
                </div>
            </div>
            <div class="panel-content">
                <div class="weather-display">
                    <div class="weather-main">
                        <div class="temp-display">
                            <span class="temp-value" id="wxTemp">--</span>
                            <span class="temp-unit">°F</span>
                        </div>
                        <div class="conditions" id="wxConditions">Loading...</div>
                        <div class="feels-like" id="wxFeelsLike"></div>
                    </div>
                    <div class="weather-details">
                        <div class="wx-detail">
                            <i class="bi bi-droplet-fill"></i>
                            <span class="detail-label">Dewpoint</span>
                            <span class="detail-value" id="wxDewpoint">--°F</span>
                        </div>
                        <div class="wx-detail">
                            <i class="bi bi-wind"></i>
                            <span class="detail-label">Wind</span>
                            <span class="detail-value" id="wxWind">-- mph</span>
                        </div>
                        <div class="wx-detail">
                            <i class="bi bi-speedometer2"></i>
                            <span class="detail-label">Gusts</span>
                            <span class="detail-value" id="wxGusts">-- mph</span>
                        </div>
                        <div class="wx-detail">
                            <i class="bi bi-moisture"></i>
                            <span class="detail-label">Humidity</span>
                            <span class="detail-value" id="wxHumidity">--%</span>
                        </div>
                        <div class="wx-detail">
                            <i class="bi bi-eye-fill"></i>
                            <span class="detail-label">Visibility</span>
                            <span class="detail-value" id="wxVisibility">-- mi</span>
                        </div>
                        <div class="wx-detail">
                            <i class="bi bi-speedometer"></i>
                            <span class="detail-label">Pressure</span>
                            <span class="detail-value" id="wxPressure">-- inHg</span>
                        </div>
                        <div class="wx-detail">
                            <i class="bi bi-compass"></i>
                            <span class="detail-label">Wind Dir</span>
                            <span class="detail-value" id="wxWindDir">--</span>
                        </div>
                        <div class="wx-detail">
                            <i class="bi bi-thermometer-snow"></i>
                            <span class="detail-label">Dew Depression</span>
                            <span class="detail-value" id="wxDewDepression">--°F</span>
                        </div>
                    </div>
                </div>
                <div class="outlook-images">
                    <div class="outlook-img">
                        <img src="https://www.spc.noaa.gov/products/outlook/day1otlk.gif" alt="SPC Day 1 Outlook" id="spcOutlook">
                        <span class="img-label">SPC Day 1</span>
                    </div>
                </div>
            </div>
        </section>

        <section class="grid-panel incidents-panel" id="incidentsPanel">
            <div class="panel-header">
                <h3><i class="bi bi-exclamation-triangle-fill"></i> iDriveArkansas Incidents</h3>
                <div class="panel-header-right">
                    <button class="btn-panel-refresh" onclick="doTheThing()" title="Refresh Incidents">
                        <i class="bi bi-arrow-clockwise"></i>
                    </button>
                    <a href="https://www.idrivearkansas.com/travel_info/report?report_type=incidents&show_tir_btn=1" target="_blank" class="external-link" title="Open iDriveArkansas">
                        <i class="bi bi-box-arrow-up-right"></i>
                    </a>
                </div>
            </div>
            <div class="panel-content">
                <div class="panel-controls-row">
                    <label class="form-check form-check-inline">
                        <input class="form-check-input" type="checkbox" id="bridgeCheck" checked>
                        <span class="form-check-label">Ignore bridge closures, construction, and maintenance</span>
                    </label>
                    <button class="btn btn-sm btn-outline-warning" id="clearIgnored" onclick="clearIgnored()">
                        Clear Ignored
                    </button>
                    <label class="form-check form-check-inline">
                        <input class="form-check-input" type="checkbox" id="autoPlayCheck" onchange="autoPlay()">
                        <span class="form-check-label">Play sound</span>
                    </label>
                </div>
                <div class="incidents-count">
                    <span class="count-badge" id="incidentCount">0</span>
                    <span>Active Incidents</span>
                </div>
                <div class="table-responsive">
                    <table class="table table-bordered table-dark table-striped table-hover" id="eventTable">
                        <thead>
                            <tr>
                                <th>Ignore</th>
                                <th>County</th>
                                <th>Type</th>
                                <th>Route</th>
                                <th>Route Type</th>
                                <th>Description</th>
                                <th>Lanes Affected</th>
                                <th>Reported By</th>
                                <th>Nearest Camera</th>
                                <th>iDriveMap</th>
                            </tr>
                        </thead>
                        <tbody id="incidentTableBody">
                            <tr>
                                <td colspan="10" class="text-center">Loading incidents...</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </section>

        <!-- Row 2: Map + Plane Tracker -->
        <section class="grid-panel map-panel" id="mapPanel">
            <div class="panel-header">
                <h3><i class="bi bi-map-fill"></i> Incidents Map</h3>
                <div class="panel-header-right">
                    <button class="btn-panel-refresh" onclick="refreshMapPanel()" title="Refresh Map">
                        <i class="bi bi-arrow-clockwise"></i>
                    </button>
                    <a href="https://www.idrivearkansas.com/" target="_blank" class="external-link" title="Open iDriveArkansas">
                        <i class="bi bi-box-arrow-up-right"></i>
                    </a>
                </div>
            </div>
            <div class="panel-content">
                <a href="https://www.idrivearkansas.com/" target="_blank" class="hover-image-link">
                    <img src="https://images.squarespace-cdn.com/content/v1/5adfc3ce4eddec97dddbe34e/9da9d628-2176-4ad4-90ac-8a20eb041d47/idrivearkansas.jpg?format=2500w" 
                         alt="iDriveArkansas Map" 
                         class="panel-preview-img"
                         id="mapPreviewImg">
                    <div class="hover-overlay">
                        <i class="bi bi-box-arrow-up-right"></i>
                        <span>Click to open iDriveArkansas</span>
                    </div>
                </a>
            </div>
        </section>

        <section class="grid-panel adsb-panel" id="adsbPanel">
            <div class="panel-header">
                <h3><i class="bi bi-airplane-fill"></i> ADS-B Plane Tracker</h3>
                <div class="panel-header-right">
                    <button class="btn-panel-refresh" onclick="refreshIframe('adsbIframe')" title="Refresh Plane Tracker">
                        <i class="bi bi-arrow-clockwise"></i>
                    </button>
                    <a href="https://globe.adsbexchange.com/?lat=36.1&lon=-94.1&zoom=9" target="_blank" class="external-link" title="Open ADS-B Exchange">
                        <i class="bi bi-box-arrow-up-right"></i>
                    </a>
                </div>
            </div>
            <div class="panel-content iframe-container">
                <iframe 
                    id="adsbIframe"
                    src="https://globe.adsbexchange.com/?lat=36.1&lon=-94.1&zoom=9&hideSideBar&hideButtons" 
                    title="ADS-B Exchange"
                    loading="lazy"
                    allowfullscreen>
                </iframe>
            </div>
        </section>

        <!-- Row 3: Radar -->
        <section class="grid-panel radar-panel" id="radarPanel">
            <div class="panel-header">
                <h3><i class="bi bi-radar"></i> Radar</h3>
                <div class="panel-tabs">
                    <button class="tab-btn active" data-tab="nws" data-url="https://radar.weather.gov/">NWS</button>
                    <button class="tab-btn" data-tab="cod" data-url="https://weather.cod.edu/satrad/nexrad/">COD</button>
                    <button class="tab-btn" data-tab="pivotal" data-url="https://home.pivotalweather.com/">Pivotal</button>
                </div>
                <div class="panel-header-right">
                    <button class="btn-panel-refresh" onclick="refreshRadarPanel()" title="Refresh Radar">
                        <i class="bi bi-arrow-clockwise"></i>
                    </button>
                    <a href="https://radar.weather.gov/" target="_blank" class="external-link panel-external-link" id="radarExternalLink" title="Open Radar">
                        <i class="bi bi-box-arrow-up-right"></i>
                    </a>
                </div>
            </div>
            <div class="panel-content">
                <div class="tab-content active" id="nws-tab">
                    <img src="https://radar.weather.gov/ridge/standard/KSRX_0.gif" alt="NWS Radar" id="nwsRadar" class="radar-img">
                </div>
                <div class="tab-content" id="cod-tab">
                    <a href="https://weather.cod.edu/satrad/nexrad/?parms=SRX-N0B-0-48-100-usa-rad" target="_blank" class="hover-image-link">
                        <img src="https://i.pinimg.com/736x/a6/2d/8f/a62d8f2d03c4457d852d26456a429a7d.jpg" 
                             alt="COD Radar" 
                             class="panel-preview-img">
                        <div class="hover-overlay">
                            <i class="bi bi-box-arrow-up-right"></i>
                            <span>Click to open COD Radar</span>
                        </div>
                    </a>
                </div>
                <div class="tab-content" id="pivotal-tab">
                    <iframe 
                        id="pivotalRadarIframe"
                        src="https://home.pivotalweather.com/"
                        title="Pivotal Weather"
                        loading="lazy">
                    </iframe>
                </div>
            </div>
        </section>

        <!-- Row 4: Severe Weather -->
        <section class="grid-panel severe-panel" id="severePanel">
            <div class="panel-header">
                <h3><i class="bi bi-lightning-fill"></i> Severe Weather</h3>
                <div class="panel-tabs">
                    <button class="tab-btn active" data-tab="spc" data-url="https://www.spc.noaa.gov/">SPC</button>
                    <button class="tab-btn" data-tab="nhc" data-url="https://www.nhc.noaa.gov/">NHC</button>
                    <button class="tab-btn" data-tab="nadocast" data-url="http://data.nadocast.com/viewer.html">Nadocast</button>
                </div>
                <div class="panel-header-right">
                    <button class="btn-panel-refresh" onclick="refreshSeverePanel()" title="Refresh Severe Weather">
                        <i class="bi bi-arrow-clockwise"></i>
                    </button>
                    <a href="https://www.spc.noaa.gov/" target="_blank" class="external-link panel-external-link" id="severeExternalLink" title="Open SPC">
                        <i class="bi bi-box-arrow-up-right"></i>
                    </a>
                </div>
            </div>
            <div class="panel-content">
                <div class="tab-content active" id="spc-tab">
                    <iframe 
                        id="spcIframe"
                        src="https://www.spc.noaa.gov/classic.html"
                        title="SPC Products"
                        loading="lazy">
                    </iframe>
                </div>
                <div class="tab-content" id="nhc-tab">
                    <iframe 
                        id="nhcIframe"
                        src="https://www.nhc.noaa.gov/"
                        title="National Hurricane Center"
                        loading="lazy">
                    </iframe>
                </div>
                <div class="tab-content" id="nadocast-tab">
                    <a href="http://data.nadocast.com/viewer.html" target="_blank" class="hover-image-link">
                        <img src="https://test.nadocast.com/maps/20200412/nadocast_tornado_20200412_t00z.png" 
                             alt="Nadocast" 
                             class="panel-preview-img">
                        <div class="hover-overlay">
                            <i class="bi bi-box-arrow-up-right"></i>
                            <span>Click to open Nadocast</span>
                        </div>
                    </a>
                </div>
            </div>
        </section>

        <!-- Row 5: Soundings/Models -->
        <section class="grid-panel models-panel" id="modelsPanel">
            <div class="panel-header">
                <h3><i class="bi bi-graph-up"></i> Soundings & Models</h3>
                <div class="panel-tabs">
                    <button class="tab-btn active" data-tab="soundings" data-url="https://www.spc.noaa.gov/exper/soundings/">Soundings</button>
                    <button class="tab-btn" data-tab="models" data-url="https://weather.cod.edu/forecast/">COD Models</button>
                    <button class="tab-btn" data-tab="pivotalmodels" data-url="https://www.pivotalweather.com/model.php">Pivotal Models</button>
                </div>
                <div class="panel-header-right">
                    <button class="btn-panel-refresh" onclick="refreshModelsPanel()" title="Refresh Models">
                        <i class="bi bi-arrow-clockwise"></i>
                    </button>
                    <a href="https://www.spc.noaa.gov/exper/soundings/" target="_blank" class="external-link panel-external-link" id="modelsExternalLink" title="Open Soundings">
                        <i class="bi bi-box-arrow-up-right"></i>
                    </a>
                </div>
            </div>
            <div class="panel-content">
                <div class="tab-content active" id="soundings-tab">
                    <iframe 
                        id="soundingsIframe"
                        src="https://www.spc.noaa.gov/exper/soundings/"
                        title="NWS Soundings"
                        loading="lazy">
                    </iframe>
                </div>
                <div class="tab-content" id="models-tab">
                    <a href="https://weather.cod.edu/forecast/" target="_blank" class="hover-image-link">
                        <img src="https://i.ytimg.com/vi/3QSh1p5259c/hq720.jpg?sqp=-oaymwE7CK4FEIIDSFryq4qpAy0IARUAAAAAGAElAADIQj0AgKJD8AEB-AH-CYAC0AWKAgwIABABGGUgZShlMA8=&rs=AOn4CLBs-aB6uKvAxjFI-20-bh4IKsyT9A" 
                             alt="COD Models" 
                             class="panel-preview-img">
                        <div class="hover-overlay">
                            <i class="bi bi-box-arrow-up-right"></i>
                            <span>Click to open COD Models</span>
                        </div>
                    </a>
                </div>
                <div class="tab-content" id="pivotalmodels-tab">
                    <a href="https://www.pivotalweather.com/model.php" target="_blank" class="hover-image-link">
                        <img src="https://m1o.pivotalweather.com/maps/models/gfs/2026010812/006/prateptype_cat-imp.conus.png" 
                             alt="Pivotal Models" 
                             class="panel-preview-img">
                        <div class="hover-overlay">
                            <i class="bi bi-box-arrow-up-right"></i>
                            <span>Click to open Pivotal Weather Models</span>
                        </div>
                    </a>
                </div>
            </div>
        </section>

        <!-- Row 6: NWS & Storm Streams -->
        <section class="grid-panel nws-panel" id="nwsPanel">
            <div class="panel-header">
                <h3><i class="bi bi-cloud-sun"></i> NWS Tulsa</h3>
                <div class="panel-header-right">
                    <button class="btn-panel-refresh" onclick="refreshIframe('nwsIframe')" title="Refresh NWS">
                        <i class="bi bi-arrow-clockwise"></i>
                    </button>
                    <a href="https://www.weather.gov/tsa/" target="_blank" class="external-link" title="Open NWS Tulsa">
                        <i class="bi bi-box-arrow-up-right"></i>
                    </a>
                </div>
            </div>
            <div class="panel-content iframe-container">
                <iframe 
                    id="nwsIframe"
                    src="https://www.weather.gov/tsa/"
                    title="NWS Tulsa"
                    loading="lazy">
                </iframe>
            </div>
        </section>

        <section class="grid-panel streams-panel" id="streamsPanel">
            <div class="panel-header">
                <h3><i class="bi bi-broadcast"></i> Storm Streams</h3>
                <div class="panel-header-right">
                    <button class="btn-panel-refresh" onclick="refreshIframe('streamsIframe')" title="Refresh Streams">
                        <i class="bi bi-arrow-clockwise"></i>
                    </button>
                    <a href="https://livestormchasing.com/" target="_blank" class="external-link" title="Open Storm Streams">
                        <i class="bi bi-box-arrow-up-right"></i>
                    </a>
                </div>
            </div>
            <div class="panel-content iframe-container">
                <iframe 
                    id="streamsIframe"
                    src="https://livestormchasing.com/"
                    title="Storm Streams"
                    loading="lazy">
                </iframe>
            </div>
        </section>

        <!-- Quick Links Panel -->
        <section class="grid-panel tools-panel" id="toolsPanel">
            <div class="panel-header">
                <h3><i class="bi bi-tools"></i> Quick Links</h3>
            </div>
            <div class="panel-content">
                <div class="quick-links">
                    <a href="https://www.idrivearkansas.com/" target="_blank" class="quick-link">
                        <i class="bi bi-car-front-fill"></i>
                        <span>iDrive Arkansas</span>
                    </a>
                    <a href="https://globe.adsbexchange.com/" target="_blank" class="quick-link">
                        <i class="bi bi-airplane"></i>
                        <span>ADS-B Exchange</span>
                    </a>
                    <a href="https://www.weather.gov/tsa/" target="_blank" class="quick-link">
                        <i class="bi bi-cloud-sun"></i>
                        <span>NWS Tulsa</span>
                    </a>
                    <a href="http://data.nadocast.com/viewer.html" target="_blank" class="quick-link">
                        <i class="bi bi-tornado"></i>
                        <span>Nadocast</span>
                    </a>
                    <a href="https://www.spc.noaa.gov/" target="_blank" class="quick-link">
                        <i class="bi bi-lightning-fill"></i>
                        <span>SPC</span>
                    </a>
                    <a href="https://www.nhc.noaa.gov/" target="_blank" class="quick-link">
                        <i class="bi bi-hurricane"></i>
                        <span>NHC</span>
                    </a>
                    <a href="https://www.pivotalweather.com/" target="_blank" class="quick-link">
                        <i class="bi bi-bar-chart-fill"></i>
                        <span>Pivotal Weather</span>
                    </a>
                    <a href="https://weather.cod.edu/" target="_blank" class="quick-link">
                        <i class="bi bi-mortarboard-fill"></i>
                        <span>COD Weather</span>
                    </a>
                    <a href="https://livestormchasing.com/" target="_blank" class="quick-link">
                        <i class="bi bi-broadcast"></i>
                        <span>Storm Streams</span>
                    </a>
                    <a href="https://forecast.weather.gov/MapClick.php?lat=36.06487500000003&lon=-94.16178999999994" target="_blank" class="quick-link">
                        <i class="bi bi-geo-alt-fill"></i>
                        <span>NWS Forecast</span>
                    </a>
                    <a href="https://arkansas.trafficcamarchive.com/cameraList.jsp" target="_blank" class="quick-link">
                        <i class="bi bi-camera-video-fill"></i>
                        <span>Traffic Cams</span>
                    </a>
                </div>
                <div class="camera-count mt-3">
                    <i class="bi bi-camera-video-fill"></i>
                    <span id="cameraCount">Loading...</span> Traffic Cameras Online
                    <a href="https://arkansas.trafficcamarchive.com/cameraList.jsp" target="_blank" class="camera-link">
                        <i class="bi bi-box-arrow-up-right"></i>
                    </a>
                </div>
            </div>
        </section>
    </main>

    <!-- Footer -->
    <footer class="dashboard-footer">
        <div class="container-fluid">
            <div class="row">
                <div class="col text-center">
                    <div class="footer-content">
                        <span class="footer-text">
                            Auto-refresh: <span id="refreshTimer">5:00</span>
                        </span>
                        <span class="footer-data">
                            Data: 
                            <a href="https://www.idrivearkansas.com/" target="_blank">iDrive Arkansas</a> · 
                            <a href="https://globe.adsbexchange.com/" target="_blank">ADS-B Exchange</a> · 
                            <a href="https://www.weather.gov/tsa/" target="_blank">NWS Tulsa</a> · 
                            <a href="http://data.nadocast.com/" target="_blank">Nadocast</a> · 
                            <a href="https://www.spc.noaa.gov/" target="_blank">SPC</a> · 
                            <a href="https://www.nhc.noaa.gov/" target="_blank">NHC</a> · 
                            <a href="https://www.pivotalweather.com/" target="_blank">Pivotal Weather</a> · 
                            <a href="https://weather.cod.edu/" target="_blank">COD Weather</a> · 
                            <a href="https://livestormchasing.com/" target="_blank">Storm Streams</a> · 
                            <a href="https://forecast.weather.gov/" target="_blank">NWS Forecast</a> · 
                            <a href="https://arkansas.trafficcamarchive.com/" target="_blank">AR Traffic Cam Archive</a>
                        </span>
                        <span class="footer-credits">
                            Rework of <a href="https://www.linkedin.com/in/ckwark/" target="_blank" class="credit-link">Cameron Wilson's</a> 
                            <a href="http://airtrak.me" target="_blank" class="credit-link">airtrak.me</a> Site 
                            by <a href="https://www.linkedin.com/in/maximiliano-garcia642/" target="_blank" class="credit-link">Maximiliano Garcia</a>, 
                            as shown in <a href="https://github.com/maxgarcia642/NWAeroGridashboard" target="_blank" class="credit-link">GitHub</a>
                        </span>
                    </div>
                </div>
            </div>
        </div>
    </footer>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <!-- Custom Dashboard JS -->
    <script src="weather.js"></script>
</body>
</html>
